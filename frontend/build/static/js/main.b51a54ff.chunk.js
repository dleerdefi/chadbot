(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{19:function(e,t,s){},27:function(e,t,s){"use strict";s.r(t);var c=s(0),a=s.n(c),r=s(9),n=s.n(r),j=(s(19),s(28)),i=s(7),l=s(3),o=s(4);var b=e=>{let{user:t,messages:s,setMessages:a}=e;const[r,n]=Object(c.useState)(""),i=Object(c.useCallback)((async()=>{try{const e=await j.a.get("http://localhost:3000/api/messages");a(e.data)}catch(e){console.error("Error fetching messages:",e)}}),[a]);Object(c.useEffect)((()=>{i()}),[i]);return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{children:s.map(((e,t)=>Object(o.jsxs)("div",{children:[Object(o.jsx)("strong",{children:e.user}),": ",e.text]},t)))}),Object(o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.trim())try{const e=await j.a.post("http://localhost:3000/api/messages",{user:t.name,text:r});a([...s,...e.data]),n("")}catch(c){console.error("Error sending message:",c)}},children:[Object(o.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),placeholder:"Type a message..."}),Object(o.jsx)("button",{type:"submit",children:"Send"})]})]})};var d=e=>{let{setUser:t}=e;const[s,a]=Object(c.useState)(""),[r,n]=Object(c.useState)(""),[b,d]=Object(c.useState)(""),O=Object(l.p)();return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Login"}),b&&Object(o.jsx)("p",{style:{color:"red"},children:b}),Object(o.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await j.a.post("/login",{email:s,password:r});t(e.data),O("/app")}catch(b){d("Error logging in")}},children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"Email"}),Object(o.jsx)("input",{type:"email",value:s,onChange:e=>a(e.target.value)})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"Password"}),Object(o.jsx)("input",{type:"password",value:r,onChange:e=>n(e.target.value)})]}),Object(o.jsx)("button",{type:"submit",children:"Login"})]}),Object(o.jsx)("button",{onClick:()=>{window.location.href="/auth/google"},children:"Login with Google"}),Object(o.jsx)(i.b,{to:"/register",children:"Need an account? Register"})]})};var O=e=>{let{setUser:t}=e;const[s,a]=Object(c.useState)(""),[r,n]=Object(c.useState)(""),[b,d]=Object(c.useState)(""),[O,h]=Object(c.useState)(""),[u,p]=Object(c.useState)(""),x=Object(l.p)();return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Register"}),u&&Object(o.jsx)("p",{style:{color:"red"},children:u}),Object(o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b===O)try{await j.a.post("/register",{email:s,username:r,password:b});const e=await j.a.post("/login",{email:s,password:b});t(e.data),x("/app")}catch(u){p("Error registering user")}else p("Passwords do not match")},children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"Email"}),Object(o.jsx)("input",{type:"email",value:s,onChange:e=>a(e.target.value)})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"Username"}),Object(o.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value)})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"Password"}),Object(o.jsx)("input",{type:"password",value:b,onChange:e=>d(e.target.value)})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"Confirm Password"}),Object(o.jsx)("input",{type:"password",value:O,onChange:e=>h(e.target.value)})]}),Object(o.jsx)("button",{type:"submit",children:"Register"})]}),Object(o.jsx)(i.b,{to:"/login",children:"Already have an account? Login"})]})};var h=()=>Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Account Page"}),Object(o.jsx)("p",{children:"This is the account page."})]});var u=()=>{const[e,t]=Object(c.useState)(null),[s,a]=Object(c.useState)(!0);return Object(c.useEffect)((()=>{(async()=>{try{const e=await j.a.get("/api/current_user");t(e.data)}catch(e){console.error("Error fetching current user:",e)}finally{a(!1)}})()}),[]),s?Object(o.jsx)("div",{children:"Loading..."}):Object(o.jsx)(i.a,{children:Object(o.jsxs)(l.d,{children:[Object(o.jsx)(l.b,{path:"/login",element:e?Object(o.jsx)(l.a,{to:"/app"}):Object(o.jsx)(d,{setUser:t})}),Object(o.jsx)(l.b,{path:"/register",element:e?Object(o.jsx)(l.a,{to:"/app"}):Object(o.jsx)(O,{setUser:t})}),Object(o.jsx)(l.b,{path:"/app",element:e?Object(o.jsx)(b,{user:e}):Object(o.jsx)(l.a,{to:"/login"})}),Object(o.jsx)(l.b,{path:"/account",element:e?Object(o.jsx)(h,{user:e}):Object(o.jsx)(l.a,{to:"/login"})}),Object(o.jsx)(l.b,{path:"/",element:Object(o.jsx)(l.a,{to:e?"/app":"/login"})})]})})};n.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(u,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.b51a54ff.chunk.js.map